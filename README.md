# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

## Основные части проекта

Проект состоит из 6 основных экранов:

1 Таблица карточек (категория, название, картинка, цена). На каждую можно нажать.

2 Карточка открывается в модальном окне с подробным описанием и кнопкой: купить. После добавления товара в корзину кнопка меняется на: В корзину.

3 Модальное окно: корзина. В ней списком отображаются товары (название и цена). Каждый товар можно удалить, (увеличить или уменьшить количеств). Отображается сумма всех товаров. Есть кнопка: оформить.

4 При оформлении товара открывается новое модальное окно с выбором способа оплаты (безналичный расчет или наличные) и введением адреса доставки. При введении данных активируется кнопка "Далее".

5 При переходе кнопки Далее открывается модально окно, где пользователь вводит личные данные:  email и телефон. После того как будут введены корректно данные становится активной кнопка оплатить. 

6 Модальное окно: заказ оформлен. Есть кнопка: за новыми покупками (переход на главную).

В проекте используется архитектурный паттерн MVP

## Данные

Название товара, описание товара, цена товара, категория товара, изображение товара, способ оплаты, адрес доставки, почта, телефон.

Объекты: 

- Товар. Действия: выбор способа оплаты и адреса.

- Данные покупателя. Действия: указание почты и телефона, очистка данных.

Коллекции: 

- Каталог товаров. Действия: заполнить каталог, получить каталог.

- Корзина с товарами. Действия: добавлять в корзину, удалять из корзины, очищать корзину, получить список товаров.

## Базовые интерфейсы и типы

Интерфейс IProduct описывает свойства одного товара.

```
interface IProduct {
    id: string;
    description: string;
    image: string;
    title: string;
    category: string;
    price: number;
}
```

Интерфейс IOrder описывает формат данных, которые сервер возвращает в ответ об успешном заказе и сумму заказа.

```
interface IOrder {
    id: string;
    total: number;
}
```

Вариант ответов от сервера:

```
type TResponseProductList = {
    total: number;
    items: IProduct[];
}
```

При запросе списка всех продуктов, состоит из количества подуктов и массива самих продуктов.

```
type TResponseProductItem = IProduct | {error: "NotFound"};
```

По id ищет какой-то конкретный продукт или получает ошибку о том что продукт не найден.

```
type TResponseOrder = IOrder | {error: string};
```

Получает ответ при создании заказа.

## Базовые компоненты

- API

В конструктор принимеается базовый урл. Класс имеет методы get и post. Делают запросы на сервер.

- класс EventEmitter

Позволяет реализовать возможность подписаться на все события или слушать события. Устанавливает слушателя события, снимает его. Создает коллбек триггер, генерирующий событие при вызове.

- Model 

Модель, чтобы можно было отличить ее от простых объектов с данными

- Component

Базовый класс для компонентов отображения(view)
Имеет инструменты для работы с DOM (sethidden, setvisible; render)

## Компоненты

- класс MarketApi

Есть метод, через который получает список продуктов и создает заказ, по id продукта получает сам продуцкт. Он будет наследоваться от класса  API, который умеет слать запросы.

- Карточка товара. Данные: название товара, описание товара, цена товара, категория товара, изображение товара.

class ProductComponent

Содержит ссылки на элементы в html-файле, куда будет вписывать значения и содержать методы выставления этих значений.

- Корзина. Данные: список товаров (с названием товара и ценой), итоговая сумма.

class BasketComponent

Содержит данные про то, где лежит ссылка в html файле чтобы отобразить этот элемент на экране

class BasketModel 

Содержит данные про то, какие товары и что есть в карзине

```
class BasketModel{
    items: IProduct[];
    byu: User;
    addProduct(IProduct): void;
    removeItem(IProduct): void;
}
```
- класс UserForm

Данные: способ оплаты, адрес доставки, почта, телефон.
Базовый компонент для способа оплаты и пользователя.

```
class User{
    pay: string;
    email: string;
    adress: string;
    phone: number;
}
```

- Форма

Процессы в приложении реализованы через события. В index.ts мы подписываемся на события в компонентах и будем обновлять модели корзины и пользователя и включать и выключать компоненты.
